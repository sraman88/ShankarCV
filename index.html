<!-- Chatbot Toggle with Avatar -->
<div class="chatbot-toggle">
  <img src="chat-avatar.png" alt="Chatbot" class="chatbot-avatar" />
  <div class="chat-label">ðŸ’¬ Chat</div>
</div>

<!-- Chatbot Window -->
<div class="chatbot">
  <div class="chatbot-messages"></div>
  <div class="typing-indicator" style="display: none;">Typing...</div>
  <input type="text" class="chatbot-input" placeholder="Type your question..." />
</div>

<style>
.chatbot-toggle {
  position: fixed;
  bottom: 25px;
  right: 25px;
  width: 80px;
  height: 80px;
  cursor: pointer;
  z-index: 1000;
}

.chatbot-avatar {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.25);
  transition: transform 0.3s ease;
}

.chatbot-avatar:hover {
  transform: scale(1.05);
}

.chat-label {
  position: absolute;
  bottom: -20px;
  left: 50%;
  transform: translateX(-50%);
  background: #2c3e50;
  color: #ecf0f1;
  font-size: 12px;
  padding: 3px 8px;
  border-radius: 12px;
  white-space: nowrap;
  box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}

.chatbot {
  position: fixed;
  bottom: 120px;
  right: 25px;
  width: 320px;
  max-height: 420px;
  background: #2c3e50;
  color: #ecf0f1;
  box-shadow: 0 0 15px rgba(0,0,0,0.4);
  display: none;
  flex-direction: column;
  border-radius: 15px;
  overflow: hidden;
  z-index: 999;
  animation: popUp 0.3s ease-out;
}

@keyframes popUp {
  from {
    transform: scale(0.95);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}

.chatbot-messages {
  padding: 10px;
  flex-grow: 1;
  overflow-y: auto;
  font-size: 14px;
}

.message.user {
  text-align: right;
  color: #1abc9c;
  margin-bottom: 5px;
}

.message.bot {
  text-align: left;
  color: #f1c40f;
  margin-bottom: 5px;
}

.chatbot-input {
  padding: 10px;
  border: none;
  background: #34495e;
  color: white;
  font-size: 14px;
  border-top: 1px solid #7f8c8d;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const chatbotToggle = document.querySelector('.chatbot-toggle');
  const chatbot = document.querySelector('.chatbot');
  const chatInput = document.querySelector('.chatbot-input');
  const messages = document.querySelector('.chatbot-messages');
  const typingIndicator = document.querySelector('.typing-indicator');

  chatbotToggle.addEventListener('click', () => {
    chatbot.style.display = chatbot.style.display === 'none' || chatbot.style.display === '' ? 'flex' : 'none';
  });

  chatInput.addEventListener('keypress', (e) => {
    if (e.key === 'Enter' && chatInput.value.trim()) {
      const userMsg = chatInput.value.trim();
      addMessage('user', userMsg);
      chatInput.value = '';
      typingIndicator.style.display = 'flex';

      setTimeout(() => {
        const botReply = getBotResponse(userMsg);
        addMessage('bot', botReply);
        typingIndicator.style.display = 'none';
      }, 700);
    }
  });

  function addMessage(type, text) {
    const message = document.createElement('div');
    message.className = `message ${type}`;
    message.textContent = text;
    messages.appendChild(message);
    messages.scrollTop = messages.scrollHeight;
  }

  function getBotResponse(query) {
    const responses = {
      "hello": "Hi there! I'm here to help you learn about Shankar.",
      "who is shankar": "Shankar Raman is a TA pro with 15 years of experience, currently at OpenText.",
      "genai": "Shankar integrates GenAI into hiringâ€”automating screening, reducing time-to-hire.",
      "leadership hiring": "He led leadership hiring at Target and OpenText. Ask me more!",
      "awards": "He received a $1,000 award for accelerating hiring by 25% at OpenText.",
      "default": "Try asking: 'Who is Shankar?', 'GenAI expertise', or 'Awards'."
    };

    query = query.toLowerCase();
    return responses[query] || responses["default"];
  }
});
</script>
